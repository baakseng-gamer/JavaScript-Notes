# 205 字符串

**目录**



***

# 1. 认识字符串对象

前面有一个内容 <a href="..\111 Javascript数据类型\111 Javascript数据类型.md">111 Javascript数据类型</a> 提到的一种数据类型—— string 字符串，所有带单引号或双引号的叫做字符串。这是基本类型。

为方便操作基本数据类型，JavaScript 还提供了三个特殊的引用类型：String、Number 和 Boolean。这些的类型叫做**基本包装类型。**

**==注意==**

* 开头大写的 String、 Number 和 Boolean 是复杂数据类型；
* 开头小写的是简单数据类型。

字符串是基本类型，按照逻辑上不应该有方法， 但是 JavaScript 可以使之有方法，所以**万物皆可对象**。



示例：

```
    let myName = 'Baakseng';
    let text = myName.indexOf('k');
    console.log(myName, text); // Baakseng 3
    // Baakseng 中的 k 索引号为3
    console.log(typeof myName); // string
```

实例： [20501renshi01.html](20501renshi01.html) 

实际上，每当读取一个基本类型值的时候，**后台就会创建一个对应的基本包装类型的对象**，从而让我们能够调用一些方法来操作这些数据。

根据上面的示例执行过程如下：

```
    let myName;
    // 生成临时变量
    let tmp = new String('Baakseng');
    // 赋值给我们的字符串
    myName = tmp;
    // 销毁临时变量
    tmp = null;
    console.log(myName); // 输出结果在下面所示
    console.log(typeof myName); // object
    console.log(tmp); // null
    console.log(typeof tmp); // object
```

console.log(myName); 的输出结果：

```
String {"Baakseng"}
0: "B"
1: "a"
2: "a"
3: "k"
4: "s"
5: "e"
6: "n"
7: "g"
length: 8
__proto__: String
[[PrimitiveValue]]: "Baakseng"
```

实例： [20501renshi02.html](20501renshi02.html) 

数字第0位是"B"，第1位是"a"，它的 length 属性是8，即8个字符。它的默认值是 "Baakseng"，它的原型 (proto) 是 String 这个类。前面有个一段话：**JS中的万物皆可对象**，字符串型 string 是字符串引用类型 String 中的一员，是会继承字符串引用类型的所有属性。好比人属于人类中的一员，人会继承人类的所有特征一样。

点击 "proto" 原型，可查看它继承 String 哪些方法，下图所示可展示全部方法：

![20501](img/20501.png)

```
    let myName = new String('Baakseng');
    console.log(myName.__proto__); // String
    console.log(myName.__proto__.__proto__); // Object
    console.log(myName.__proto__.__proto__.__proto__); // null
```

这个方法的原型，指向了 Function 的 prototype （注意constructor这个属性,默认会指向Function本身），再次打开proto，会打开继承的Object这个基本引用类型；之所以说是基本引用类型，是因为Object.proto是null，已经到顶了。

我们从里面选一个方法 indexOf()，看看这个方法用途是什么：

```
    let test1 = myName.indexOf('B');
    let test2 = myName.__proto__.indexOf('B');
    console.log(test1); // 0
    console.log(test2); // -1
```

indexOf() 这个方法就是括号里的字符在哪个索引号。'B' 在第0位，所以输出是0。

实例： [20501renshi03.html](20501renshi03.html) 

如果使用下面就不行了，会报错，因为 .proto.proto里面并没有 indexOf() 这个方法。

```
let test3 = myName.__proto__.__proto__.indexOf('B'); // is not a function 
```



基本包装类型的简单讲解就到这一步，后面会单独一个内容做笔记了解基本包装类型。



# 2. 声明

字符串声明有以下几个方法：

* 通过 new 运算符声明字符串；
* 省略 new 声明字符串；
* 字符串字面量赋值。

```
    let str1 = new String('GP01');
    let str2 = String('GP02');
    let str3 = 'GP03';

    console.log(str1, typeof str1); // String {"GP01"} object
    console.log(str2, typeof str2); // GP02 string
    console.log(str3, typeof str3); // GP03 string
```

实例： [20502shengming01.html](20502shengming01.html) 

当 String() 和 new 运算符一起作为构造函数使用时，它返回一个新创建的String对象,存放的是字符串s或s的字符串表示。
当不用new运算符调用String()是，它只把s转换成原始的字符串，并返回转换后的值。



# 3. length

每个 String 对象都有 length 属性，表示字符串中的字符数量。看下面的示例：

```
    let str = new String('Baakseng');
    let howLength = str.length;
    console.log(str.length); // 8
    console.log(howLength); // 8
```

有8个字符。

实例： [20503length01.html](20503length01.html) 



如果是汉字呢？

```
    let myName = '黎柏成';
    console.log(myName.length); // 3 
```

一个汉字算一个字符。

实例： [20503length02.html](20503length02.html) 



其它各种汉英、空格、标点符号、空字符等等示例：

```
    let str1 = '中文english';
    console.log(str1.length); // 9 一个汉字一个字符
    
    let str2 = 'hi!,.';
    console.log(str2.length); // 一个标点符号一个字符

    let str3 = ' '; // 一个空格
    let str4 = '  '; // 两个空格
    console.log(str3.length, str4.length); // 1 2 一个空格一个字符

    let str5 = '';
    console.log(str5.length); // 0 无内容就是零个字符

    let str6 = 'Hi! L叔。，';
    console.log(str6.length); // 8 一个中文标点符号一个字符
```

实例： [20503length03.html](20503length03.html) 



# 4. 字符串不可变