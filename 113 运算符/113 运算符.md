# 113 运算符

也被称为**操作符**，是用于实现赋值、比较和执行算数运算等功能的符号。

术语：**“一元运算符”** ，**“二元运算符”**，**“运算元”**

* 运算元 —— 运算符应用的对象。比如乘法运算 5 * 2，有两个运算元：左运算元 5 和右运算元 2。有时候也称其为“参数”而不是“运算元”。

* 如果一个运算符对应的只有一个运算元，那么它是 一元运算符。比如一元负号运算符（unary negation）-，它的作用是对数字进行正负转换：

  ```
  let x = 1;
  x = - x;
  console.log(x) //-1 一元负符号运算符生效
  ```

  还有一个作用能转换成数字：

  ```
          let y = "123";
          y = + y;
          console.log(y);
          console.log(typeof y);
  ```

  实例： [11301operator.html](11301operator.html) 



**表达式**

```
let myName = "Baakseng";
```

这是一个表达式，把等号右边的字符串赋值到等号左边的变量名上。



## 1.算术运算符

在y=5情况下，下面表格解释了这些算术运算符：

| 运算符 | 描述         | 例子  | x 运算结果 | y 运算结果 | 在线实例 |
| :----- | :----------- | :---- | :--------- | :--------- | :------- |
| +      | 加法         | x=y+2 | 7          | 5          |          |
| -      | 减法         | x=y-2 | 3          | 5          |          |
| *      | 乘法         | x=y*2 | 10         | 5          |          |
| /      | 除法         | x=y/2 | 2.5        | 5          |          |
| %      | 取模（余数） | x=y%2 | 1          | 5          |          |
| ++     | 自增         | x=++y | 6          | 6          |          |
|        |              | x=y++ | 5          | 6          |          |
| --     | 自减         | x=--y | 4          | 4          |          |
|        |              | x=y-- | 5          | 4          |          |

还有`**`求幂这个运算符



**取余：**

```
        let a = 99;
        let b = 23;
        console.log(a % b); //7
```

小学的数学内容嘛~

99 = 23 * 4 + 7，其中7就是余数。

实例： [11302operator.html](11302operator.html) 

**求幂：**

```
        console.log(2 ** 3); //8
        console.log(3 ** 2);//9
        console.log(1.5 ** 2);//1.5X1.5=2.25
        console.log(4 ** (1/2));
```

实例： [11303operator.html](11303operator.html) 

在数学上，求幂的定义也适用于非整数。例如，平方根是以 `1/2` 为单位的求幂。





## 2. 赋值运算符

值符号 `=` 也是一个运算符。从下面的**优先级表**中可以看到它的优先级非常低，只有 `3`。

`x = 2 * 2 + 1`，所有的计算先执行，然后 `=` 才执行，将计算结果存储到 `x`。

```
let x = 2 * 2 + 1;

alert( x ); // 5
```



### 2.1赋值 = 返回一个值

`=` 是一个运算符，而不是一个有着“魔法”作用的语言结构。

在 JavaScript 中，大多数运算符都会返回一个值。这对于 `+` 和 `-` 来说是显而易见的，但对于 `=` 来说也是如此。

语句 `x = value` 将值 `value` 写入 `x` **然后返回 x**。

下面是一个在复杂语句中使用赋值的例子：

```
let a = 1;
let b = 2;

let c = 3 - (a = b + 1);

alert( a ); // 3
alert( c ); // 0

console.log(1 + 1)//2是返回值
```

但是这样的代码不建议写，可读性太差



### 2.2链式赋值（Chaining assignments）

```
let a, b, c;

a = b = c = 2 + 2;

alert( a ); // 4
alert( b ); // 4
alert( c ); // 4
```

提高可读性，可改为下面这样的：

```
c = 2 + 2;
b = c;
a = c;
```



### 2.3原地修改

给定 **x=10** 和 **y=5**，下面的表格解释了赋值运算符：

| 运算符 | 例子 | 等同于 | 运算结果 | 在线实例 |
| :----- | :--- | :----- | :------- | :------- |
| =      | x=y  |        | x=5      |          |
| +=     | x+=y | x=x+y  | x=15     |          |
| -=     | x-=y | x=x-y  | x=5      |          |
| *=     | x*=y | x=x*y  | x=50     |          |
| /=     | x/=y | x=x/y  | x=2      |          |
| %=     | x%=y | x=x%y  | x=0      |          |

上面表格第一列，比如`+=`, `-=`, `*=`...也称为复合赋值运算符。



## 3.一元运算符

### 3.1加减号转化数字

一元运算符加号，或者说，加号 `+` 应用于单个值，对数字没有任何作用。但是如果运算元不是数字，加号 `+` 则会将其转化为数字。

例如：

```
        let a = 2;
        console.log(+a);//2
        let b = -3;
        console.log(+b);//

        let x = true;
        console.log(+x);//1
        let y = false;
        console.log(+y);//0
        console.log(-y);//-0
```

实例： [11304operator.html](11304operator.html) 

注意上面的最后一行，-y结果是-0。

效果和 `Number(...)` 相同，但是更加简短。



如果用二元运算符`+`加号把有数字的字符串拼接起来会怎么样：

```
        let a = "123";
        let b = "2";
        console.log(a + b);//1232
```

用加号来把它们转化数字并求和：

```
console.log(+a + +b);//125
```

更长的写法：

```
cnosole.log(Number(a) + Number(b));
```

从一个数学家的视角来看，大量的加号可能很奇怪。但是从一个程序员的视角，没什么好奇怪的：一元运算符加号首先起作用，他们将字符串转为数字，然后二元运算符加号对它们进行求和。

为什么一元运算符先于二元运算符作用于运算元？这是由于它们拥有 **更高的优先级**。



### 3.2自增自减

递增和递减操作符直接借鉴自 C，而且各有两个版本：前置型和后置型。

对一个数进行加一、减一是最常见的数学运算符之一。



**!WARING!**

> **i++**和**++1**完全是两回事



**功能总结**

* 功能相反
  * ++ 对唯一的运算数进行递增操作(每次加1)
  * --对唯一的运算数进行递减操作(每次减1)
* 规则相同
  * 运算数必须是一个变量，数组的一个元素或者对象的属性
  * 如果运算数是非数值的则运算符将它转成数值；（可用于字符串，布尔值，浮点数值和对象）
    转换规则是，调用用Number，根据转后的值，再次进行运算；
* 符号位置决定运算结果
  * 运算数之前，先进行递增（递减）操作，再进行求值；
  * 运算数之后，先求值，再进行递增(递减操作)



## 4.运算符优先级

| 优先级 | 名称     | 符号 |
| :----- | :------- | :--- |
| …      | …        | …    |
| 17     | 一元加号 | `+`  |
| 17     | 一元负号 | `-`  |
| 16     | 求幂     | `**` |
| 15     | 乘号     | `*`  |
| 15     | 除号     | `/`  |
| 13     | 加号     | `+`  |
| 13     | 减号     | `-`  |
| …      | …        | …    |
| 3      | 赋值符   | `=`  |
| …      | …        | …    |













**浮点计算会有问题**

```
        let a = 0.1;
        let b = 0.2;
        let num = a + b;
        console.log(num);//0.30000000000000004
        console.log(num == 3)//校验是否等于3 false

        let sum = (a*10 + b*10)/10;
        console.log(sum); //0.3 
        
        console.log(0.07 * 0.1);//0.007000000000000001
```

实例： [11304operator.html](11304operator.html) 

**所以：**千万不要判断两个浮点数是否相等。

## 练习

**1.判断是否能被整除**

即被整除后没有余数。