# 116 循环语句

**目录**

- [116 循环语句](#116-循环语句)
- [概要](#概要)
- [1. while循环](#1-while循环)
- [2. do...while](#2-dowhile)
- [3. while与do...while的对比](#3-while与dowhile的对比)
- [4.for](#4for)
- [5. 循环嵌套](#5-循环嵌套)
- [6. 跳出循环](#6-跳出循环)
  - [6.1break关键词](#61break关键词)
  - [6.2continue关键词](#62continue关键词)
- [7.跳转至何处](#7跳转至何处)
- [8.选for还是while?](#8选for还是while)
- [9.死循环](#9死循环)
- [总结](#总结)
- [练习](#练习)
- [练习（难度较大）](#练习难度较大)

***

# 概要

循环结构是程序中一种很重要的结构，其特点是在给定条件成立时，反复执行某程序段，直到条件不成立为止。

当我们需要让计算机做重复性的工作，这些重复性的工作有着极其相似的代码，比如，输出10次"Hello Baakseng!"

```
document.write("Hello Baakseng!")
document.write("Hello Baakseng!")
document.write("Hello Baakseng!")
...
```

实例：  [11601loop01.html](11601loop01.html) 

这样处理起来非常的费时费力，同时也会有非常多的代码冗余，那么这时候我们应该使用到的就是js中的**循环**。

我们的代码可以不用循环， 但是你真的愿意写这样的代码么？  比如打印1000次Hello Baakseng。

采用循环方法写：

```
        let i = 0;
        while (i < 10){
            document.write("Hello Baakseng<br />");
            i++;
        }
```

实例： [11601loop02.html](11601loop02.html) 

**循环** 是一种重复运行同一代码的方法。

**分类：**

1. while循环
2. do…while循环
3. for循环



# 1. while循环

语法：

```
while(条件表达式)
{
	代码;
	// 所谓的循环体
}
```

1. 先判断表达式的值
2. 当值为true，执行代码
3. 当值为false，退出循环体



例如，以下将循环输出当 i < 3 时的 i 值：

```
    let i = 0;
    while(i < 3){
        alert(i);
        i++;
    }
```

依次弹出0、1、2的模态窗。

实例： [11602while.html](11602while.html) 

循环体的单次执行叫作 **一次迭代**。上面示例中的循环进行了三次迭代。

**==!WARING!==**

* 如果上述示例中没有 `i++`，那么循环（理论上）会永远重复执行下去。实际上，浏览器提供了阻止这种循环的方法，我们可以通过终止进程，来停掉服务器端的 JavaScript。

**==注意==**

* while( 0 )时停止执行。

* 任何表达式或变量都可以是循环条件，而不仅仅是比较，条件表达式会被计算成布尔型的值。

  例如，`while (i != 0)` 可简写为 `while (i)`：

  ```
      let i = 3;
      while(i){
          alert(i);
          i--;
      }
  ```

  依次弹出3、2、1，当while( 0 )时，布尔型为false，循环结束。

  实例： [11603while.html](11603while.html) 

**==拓展==**

* 单行循环体不需要大括号

  ```
  let i = 3;
  while (i) alert(i--);
  ```

  



# 2. do...while

语法：

```
do {
  // 循环体
} while (条件表达式);
```

1. 先执行循环体内代码再进行判断
2. 如果表达式的值为true，则重复执行代码段
3. 如果表达式的值为false，则退出循环体

**==注意==**

* 别忘最后的while(...)后面要添加`;`分号。

示例：

```
let i = 0;
do {
  alert( i );
  i++;
} while (i < 3);
```

依次弹出0、1、2的模态窗。

实例： [11604dowhile.html](11604dowhile.html) 

这种形式的语法很少使用，除非希望不管条件是否为真，循环体 **至少执行一次**。通常更倾向于使用另一个形式：while(...) {...}



# 3. while与do...while的对比

|      | while                                                        | do...while                                                   |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 流程 | 1.判断条件表达式的值<br />2.当值为true时循环执行代码段<br />3.当值为false时退出循环体 | 1.先执行循环体内代码再进行判断<br />2.如果表达式的值为true，则重复执行代码段<br />3.如果表达式的值为false，则退出循环体 |
| 特性 | 1.先检查条件，再执行循环体<br />2.条件不满足则循环一次也不执行 | 1.先执行循环体，再进行条件判断 <br />2.循环体内代码至少执行一次 |
| 时机 | 一个动作被重复执行到满足某个条件时                           | 希望一个动作至少被执行依次时                                 |



# 4.for

语法：

```
for(begin; condition; step){
	body
}
```

codition翻译为条件

示例：

```
    for(let i = 0; i < 3; i++){
        alert(i);
    }
```

依次弹出0、1、2的模态窗

实例： [11605for.html](11605for.html) 

**分析语段：**

|                |            |                                                  |
| -------------- | ---------- | ------------------------------------------------ |
| begin          | `i = 0`    | 进入循环时执行一次。                             |
| condition      | `i < 3`    | 在每次循环迭代之前检查，如果为 false，停止循环。 |
| body（循环体） | `alert(i)` | 条件为真时，重复运行。                           |
| step           | `i++`      | 在每次循环体迭代后执行。                         |

工作流程：

```
开始运行 → (如果 condition 成立 → 运行 body 然后运行 step)
开始运行 → (如果 condition 成立 → 运行 body 然后运行 step)
...
```

总结：`begin` 执行一次，然后进行迭代：每次检查 `condition` 后，执行 `body` 和 `step`。



**更简单的解释：**

```
// for (let i = 0; i < 3; i++) alert(i)

// 开始
let i = 0
// 如果条件为真，运行下一步
if (i < 3) { alert(i); i++ }
// 如果条件为真，运行下一步
if (i < 3) { alert(i); i++ }
// 如果条件为真，运行下一步
if (i < 3) { alert(i); i++ }
// ……结束，因为现在 i == 3
```



**内联变量声明**

例如：

```
for (let i = 0; i < 3; i++) {
  alert(i); // 0, 1, 2
}
alert(i); // 错误，没有这个变量。
```

for()里面的let i = 0，这叫做“内联”变量声明。这样的变量只在循环中可见。

最后一行错误就是因为let是局部变量，只在代码块内有效。

实例： [11606for01.html](11606for01.html) 

如果和上面不同的定义变量方法：

```
let i = 0;

for (i = 0; i < 3; i++) { // 使用现有的变量
  alert(i); // 0, 1, 2
}

alert(i); //3，可见，因为是在循环之外声明的
```

可见let在代码块外与代码块内是不同的

实例： [11606for02.html](11606for02.html) 



**省略语句段**

for循环的任何语句段都可以被省略。

比如省略begin：

```
    let i = 0;
    for(; i < 3; i++){
        console.log(i);
    }
```

实例： [11607for01.html](11607for01.html) 

移除step：

```
    let i = 0;
    for(; i < 3; ){
        console.log(i++);
    }
```

等同于while的：

```
let i = 0;
while(i < 3){
	alert(i++);
}
```

实例： [11607for02.html](11607for02.html)  [11607for03.html](11607for03.html) 

删除所有：

```
for (;;) {
  // 无限循环 就是死循环
}
```

请注意 `for` 的两个 `;` 必须存在，否则会出现语法错误。



# 5. 循环嵌套

一个循环语句内又包含另一个完整的循环语句。

循环可以互相嵌套，下面几种都是合法的形式。

1.

```
while( )
{
	while( )
	{...}
}
```

2.

```
do{
	while( )
	{...}
}while( );
```

3.

```
do
{
	do
	{...}while();
}while();
```

4.

```
for( ; ;)
{
	for( ; ;)
	{...}
}
```

5.

```
for( ; ;)
{
	while( )
	{...}
}
```

**==注意==**

* 循环嵌套不是语法，但是要注意一下代码规范

打三角示例：

![11601](img/11601.png)

```
        // 先确定行数
        for(var i = 1; i <= 5; i++){

            // 圆圈个数
            for(var j = 1; j <= i; j++){
                document.write("O");
            }

            document.write("<br />");
        }
```

实例： [11608qiantao.html](11608qiantao.html) 



# 6. 跳出循环

## 6.1break关键词

通常条件为假时，循环会终止。但是可以用break强制退出整个循环，不再进行判断。

我们已经在之前见到过 break 语句。它用于跳出 switch() 语句。

示例：

```
        for(let i =0; i <= 100; i++){
            document.write(i + "<br />");
        }
```

从1循环输出到100为止

实例： [11609break01.html](11609break01.html) 

如果循环到10为止：

```
        for(let i = 0; i <= 100; i++){
            document.write(i + "<br />");
            if(i == 10){
                break;
            }
        }
```

本来循环到100为止，但是`if(i == 10)`时添加break，就跳出整个循环体。

换句话说，如果已执行break语句，就不会执行循环体中位于break后的语句。

实例： [11609break02.html](11609break02.html) 

**==建议==**

* 根据需要，"无限循环 + `break`" 的组合非常适用于不必在循环开始/结束时检查条件，但需要在中间甚至是主体的多个位置进行条件检查的情况。

**==注意==**

* 在多层循环中，一个break语句只向外跳一层。



## 6.2continue关键词

`continue` 指令是 `break` 的“轻量版”。它不会停掉整个循环，而是停止当前这一次迭代，并继续下一闪迭代（如果条件允许的话）。

输出100以内的奇数示例：

```
        for(let i = 0; i <= 100; i++){
            if(i % 2 == 0) {
                continue;
            }
            document.write(i + "<br />");
        }
```

continue跳过了` i % 2 == 0`，就是不输出偶数。

实例： [11610continue.html](11610continue.html) 

**==注意==**

* continue语句只能用在循环里。
*  对于 while 和 do-while 循环，continue 语句执行之后的动作是条件判断；对于 for 循环，随后的动作是变量更新。

**==优点==**

* continue 指令利于减少嵌套

  如何减少嵌套可参考网上分享的方法

**==!WARING!==**

* 禁止 break/continue 在 ‘?’ 的右边

  请注意非表达式的语法结构不能与三元运算符 `?` 一起使用。特别是 break/continue 这样的指令是不允许这样使用的。

  例如：

  ```
  if (i > 5) {
    alert(i);
  } else {
    continue;
  }
  ```

  用"?"来重写：

  ```
  (i > 5) ? alert(i) : continue; // continue 不允许在这个位置
  ```

  代码会停止运行，并显示有语法错误。

  所以这是不建议使用问号 ? 运算符替代 if 语句的原因。

# 7.跳转至何处

**break/continue 标签**

有时候我们需要从一次从多层嵌套的循环中跳出来。

例如，下述代码的循环使用了 `i` 和 `j`，从 `(0,0)` 到 `(3,3)` 提示坐标 `(i, j)`：

```
for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`Value at coords (${i},${j})`, '');

    // 如果我想从这里退出并直接执行 alert('Done!')
  }
}

alert('Done!');
```

实例： [11611breakcontunue.html](11611breakcontunue.html) 

需要提供一种方法，以在用户取消输入时来停止这个过程。

在 input 之后的普通 break 只会打破内部循环。这还不够 —— **标签**可以实现这一功能！

**标签** 是在循环之前带有冒号的标识符。

语法：

```
labelName: for (...) {
  ...
  ...break labelName;
}
```

例子：

```
outer: for (let i = 0; i < 3; i++) {

  for (let j = 0; j < 3; j++) {

    let input = prompt(`Value at coords (${i},${j})`, '');

    // 如果是空字符串或被取消，则中断并跳出这两个循环。
    if (!input) break outer; // (*)

    // 用得到的值做些事……
  }
}
alert('Done!');
```

上述代码中，`break outer` 向上寻找名为 `outer` 的标签并跳出当前循环。

实例： [11612breakcontinue.html](11612breakcontinue.html) 

**当然，continue指令也可以与标签一起使用。在这种情况下，执行跳转到标记循环的下一次迭代。**

**==!WARING!==**

* 标签并不允许“跳到”所有位置

  标签不允许我们跳到代码的任意位置。

  ```
  break label;  // 无法跳转到这个标签
  
  label: for (...)
  ```

  只有在循环内部才能调用 `break/continue`，并且标签必须位于指令上方的某个位置。



# 8.选for还是while?

一般情况下，已知循环次数时，用for，否则用while。



# 9.死循环

如何造死循环

1.

```
while(1){
	...
}
```

2.

```
do{
	...
}while(1);
```

3.

```
for( ; ; ){

}
```

# 总结

学习了三种循环：

* while —— 每次迭代之前都要检查条件。
* do..while —— 每次迭代后都要检查条件。
* for (;;) —— 每次迭代之前都要检查条件，可以使用其他设置。

通常使用 while(true) 来构造“无限”循环。这样的循环和其他循环一样，都可以通过 break 指令来终止。

如果不想在当前迭代中做任何事，并且想要转移至下一次迭代，那么可以使用 continue 指令。

break/continue 支持循环前的标签。标签是 break/continue 跳出嵌套循环以转到外部的唯一方法。

# 练习

注：1到10用while

**1.最后一次循环的值**

```
let i = 3;

while (i) {
  alert( i-- );
}
```

提示：[while循环内容有提到](#1-while循环)

实例： [11699test01.html](11699test01.html) 里面有写第几次迭代的步骤



**2.前缀形式显示哪些值**

```
let i = 0;
while (++i < 5) alert( i );
```

实例： [11699test02.html](11699test02.html) 有写迭代的步骤



**3.后缀形式显示哪些值**

```
let i = 0;
while (i++ < 5) alert( i );
```

实例： [11699test03.html](11699test03.html) 有迭代的步骤



**4.用while循环求1～100之和。**

实例： [11699test04.html](11699test04.html) 



**5.打印100以内7的倍数**

用取余的方法

实例： [11699test05.html](11699test05.html) 



**6.打印100以内的奇数**

实例： [11699test06.html](11699test06.html) 

倒序实例：  [11699test06-01.html](11699test06-01.html) 



**7.打印100以内所有偶数的和**

实例： [11699test07.html](11699test07.html) 这实例里有if语句

不带If语句的实例： [11699test07-01.html](11699test07-01.html) 



**8.打印图形**

```
* * * * * * * * * *
* * * * * * * * * *
* * * * * * * * * *
* * * * * * * * * *
```

一行10个*

思路：采用嵌套

实例： [11699test08.html](11699test08.html) 



**9.求出1-1/2+1/3-1/4…..1/100的和 var i=1;**

实例： [11699test09.html](11699test09.html) 



**10.打印出1000-2000年中所有的闰年，并以每行四个数的形式输出**

实例： [11699test10.html](11699test10.html) 



**11.用do...while()循环求1 ~ 100之和**

实例： [11699test11.html](11699test11.html) 



**12.用for输出偶数**

2到100以内的偶数

实例： [11699test12.html](11699test12.html) 

去掉if语句实例： [11699test12-01.html](11699test12-01.html) 



**13.用 "while" 替换 "for"**

```
for (let i = 0; i < 3; i++) {
  alert( `number ${i}!` );
}
```

替换前： [11699test13.html](11699test13.html) 

替换后： [11699test13-01.html](11699test13-01.html) 



**14.重复输入，直到正确为止**

```
编写一个提示用户输入大于 100 的数字的循环。如果用户输入100以内数值 —— 请他重新输入。
循环一直在请求一个数字，直到用户输入了一个大于 100 的数字、取消输入或输入了一个空行为止。
在这我们假设用户只会输入数字。在本题目中，不需要对非数值输入进行特殊处理。
```

来自现代JavaScript教程的练习，意思就是输入大于100的数字就继续输入，直到小于100的数字或者空格为止。

实例： [11699test14.html](11699test14.html) 

上面是用while语句，这次用do...while语句：

**15.输出素数（prime）**

大于 `1` 且不能被除了 `1` 和它本身以外的任何数整除的整数叫做**素数**

换句话说，`n > 1` 且不能被 `1` 和 `n` 以外的任何数整除的整数，被称为素数。

例如，`5` 是素数，因为它不能被 `2`、`3` 和 `4` 整除，会产生余数。

写一个可以输出 2 到 n 之间的所有素数的代码。

当 n=10时，结果输出 2，3，5，7。

P.S. 代码应适用于任何 n，而不是对任何固定值进行硬性调整。



**16.第20年工资为多少**

一个新入职，月工资为2000元的员工，每年涨上一年年工资5%，到20年时的月工资是多少？



**17.挑几次能装满水缸**

山上有一口缸可以装50升水，现在有15升水。老和尚叫小和尚下山挑水，每次可以挑5升。问：小和尚要挑几次水才可以把水缸挑满？通过编程解决这个问题。



**18.打印100–200之间所有能被3或者7整除的数**



**19.10的阶乘**

计算10的阶乘   (1*2*3*4*5*6*7*8*9*10   n的阶乘1*2……*n)



**20.计算1+3+5+...+99的和**



**21.九九乘法表** 



**22.判断一个数是不是合数**

指自然数中除了能被1和本身整除外，还能被其他的数整除（不包括0)的数。



**23.断一个数是不是质数。**

除了1和它本身以外不再有其他的除数整除。



**24.求出1-1/2+1/3-1/4…..1/100的和**



# 练习（难度较大）

**25.水仙花数**

找出所有的水仙花数，三位数，各位立方和等于该数本身。153 = 1 ^ 3 + 5 ^ 3 + 3 ^ 3



**26.求两个数的最大公约数**

输入两个数，求两个数的最大公约数（能够同时整除两个数的最大数）





**27.求两个数的最小公倍数**

输入两个数，求两个数的最小公倍数 （能够同时被两个数整除的最小数）





**28.输入两个数n，a**

```
输入两个数n，a，
如果n==3，a==2；
输出 2 + 22 + 222 的值。（不用输出式子）

如果 n==4，a==3；
输出 3 + 33 + 333 + 3333的值。
```



**29.回文数**

五位数中，对称的数称为回文数，找出所有的回文数。 如12321

